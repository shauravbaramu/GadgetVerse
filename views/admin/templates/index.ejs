<%- include('../partials/header', { title: crudInfo.title }) %>
<%- include('../partials/topnav') %>
<%- include('../partials/sidebar') %>

<div class="content-wrapper">
  <!-- Content Header -->
  <section class="content-header">
    <div class="container-fluid">
      <h1><%= crudInfo.title %> List</h1>
      <% if (!hideCreate) { %>
      <div class="float-right">
        <a href="/<%= crudInfo.route %>create" class="btn btn-primary btn-sm float-right">
          <i class="fa fa-plus"></i>
          <span class="kt-hidden-mobile"> Add</span>
        </a>
      </div>
      <% } %>
    </div>
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
      <% if(success) { %>
      <div class="alert alert-success alert-block p-3">
        <button type="button" class="close" data-dismiss="alert">Ã—</button>
        <%= success %>
      </div>
      <% } %>
      <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title"><%= crudInfo.title %> | Index</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
              <!-- This section should output your table or index content -->
              <%- index_content %>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
      </div>
      <!-- /.row -->
    </div>
    <!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->

<%- include('../partials/footer') %>

<!-- Additional JS -->
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  $(function () {
    $(document).on('click', '.btn-delete', function (e) {
      e.preventDefault();
      Swal.fire({
        title: 'Are you sure?',
        text: "You won't be able to revert this!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!',
        cancelButtonText: 'Cancel',
        allowOutsideClick: false,
      }).then((result) => {
        if (result.isConfirmed) {
          document.getElementById('delete-form').submit();
        }
      });
    });
  });
</script>
